(this.webpackJsonpnatal=this.webpackJsonpnatal||[]).push([[0],{66:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var r=a(2),c=a(1),n=a.n(c),o=a(15),s=a.n(o),i=a(34),d=a(5),u=a(7),l=a.n(u),j=a(12),p=a(6),b=a(32),h=a.n(b).a.create({baseURL:"/api"}),O=a(13),m=a(14);var f=function(e){var t=e.history,a=Object(c.useState)(""),n=Object(p.a)(a,2),o=n[0],s=n[1],i=Object(c.useState)(""),d=Object(p.a)(i,2),u=d[0],b=d[1],f=Object(c.useState)(""),x=Object(p.a)(f,2),v=x[0],g=x[1],N=Object(c.useState)(""),S=Object(p.a)(N,2),C=S[0],z=S[1],w=Object(c.useState)([]),y=Object(p.a)(w,2),k=y[0],I=y[1],E=Object(c.useState)(!1),F=Object(p.a)(E,2),q=F[0],J=F[1];function A(e){var t=localStorage.getItem("pedidos"),a=t?JSON.parse(t):[];if(!e)return!1;a.push(e),J(e),localStorage.setItem("pedidos",JSON.stringify(a)),I(a)}function L(){var e={nome:o||"",endereco:u||"",contato:v||""};localStorage.setItem("person-data",JSON.stringify(e))}function U(){return(U=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(),e.next=4,h.post("/pedido",{nome:o,endereco:u,pedido:C,contato:v});case 4:t=e.sent,A(t.data.numero),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),O.a.error("Erro ao realizar pedido.. voc\xea pode tentar novamente daqui a pouco. Uma dica? Copie o seu pedido para colar quando estiver de volta!",{hideAfter:1e4});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){!function(){var e=localStorage.getItem("pedidos"),t=e?JSON.parse(e):[];I(t)}(),function(){var e=localStorage.getItem("person-data");if(!e)return!1;var t=JSON.parse(e),a=t.nome,r=t.endereco,c=t.contato;s(a),b(r),g(c)}()}),[]),Object(r.jsxs)("div",{className:"hover",children:[Object(r.jsxs)("div",{className:"title",children:[Object(r.jsx)("h3",{children:"Natal solid\xe1rio"}),Object(r.jsx)("h1",{children:"Lages - SC"})]}),Object(r.jsxs)("div",{className:"card-pedido",children:[k.length>0&&Object(r.jsxs)("div",{className:"pedidos-feitos",children:["N\xfameros de pedidos seus:"," ",k.map((function(e,t){return k.length-1===t?e:"".concat(e,", ")}))]}),q?Object(r.jsx)("div",{className:"show-numero-pedido",children:Object(r.jsxs)("h2",{children:["Ol\xe1!! Recebemos seu pedido com sucesso!",Object(r.jsx)("br",{}),"Volte aqui mais tarde para ver se o seu pedido foi realizado!",Object(r.jsx)("br",{}),"Voc\xea tamb\xe9m pode consultar a partir do n\xfamero do seu pedido!!",Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsxs)("center",{children:["N\xfamero: ",q]})]})}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("input",{onChange:function(e){return s(e.target.value)},value:o,placeholder:"Seu nome"}),Object(r.jsx)("input",{onChange:function(e){return b(e.target.value)},value:u,placeholder:"Endere\xe7o"}),Object(r.jsx)("input",{onChange:function(e){return g(e.target.value)},value:v,placeholder:"Uma forma de contato"}),Object(r.jsx)("textarea",{className:"caixa",placeholder:"Digite seu pedido aqui",onChange:function(e){return z(e.target.value)},value:C}),k.length>0&&Object(r.jsxs)("div",{class:"btn-resolver-pedido",onClick:function(){return O.a.success("Para acompanhar os seus pedidos, digite o c\xf3digo na caixa abaixo e verifique se ele foi realizado!!",{hideAfter:10}),t.push("/realizeUmSonho")},children:[Object(r.jsx)(m.b,{size:18}),"Acompanhar os meus pedidos"]}),Object(r.jsxs)("div",{className:"btn-envio-pedido",onClick:function(){return U.apply(this,arguments)},children:[Object(r.jsx)(m.e,{size:18}),"Enviar pedido!"]})]})]})]})},x=a(18),v=a(33);var g=function(e){var t=e.pedido,a=e.confirmar,n=e.afterChange,o=Object(c.useState)(""),s=Object(p.a)(o,2),i=s[0],d=s[1],u=Object(c.useState)(!1),b=Object(p.a)(u,2),f=b[0],x=b[1];function g(){return(g=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.post("/pedido/setStatus",{pedidoId:t.id,status:1});case 2:O.a.success("Pedido realizado!!"),n&&n();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.post("/pedido/setStatus",{pedidoId:t.id,status:0});case 2:O.a.success("Desconfirmado!!"),n&&n();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){var e="Ol\xe1!! Quero realizar um sonho! Eu selecionei o pedido de n\xfamero ".concat(t.id,". Como fa\xe7o para realiz\xe1-lo?");d("https://api.whatsapp.com/send?phone=".concat("5547999254473","&text=").concat(e))}),[t]),Object(r.jsxs)("div",{className:"card-pedido ".concat(t.status?"resolvido":""),children:[Object(r.jsxs)("div",{className:"card-header",children:["Pedido n\xba ",t.id]}),Object(r.jsxs)("div",{className:"card-body",children:[t.pedido,f&&Object(r.jsxs)("div",{className:"contato",children:[t.nome&&Object(r.jsxs)(r.Fragment,{children:[" - Nome: ",t.nome,Object(r.jsx)("br",{})]}),t.endereco&&Object(r.jsxs)(r.Fragment,{children:[" - Endereco: ",t.endereco,Object(r.jsx)("br",{})]}),t.contato?Object(r.jsxs)(r.Fragment,{children:[" - Contato: ",t.contato,Object(r.jsx)("br",{})]}):"Contato n\xe3o informado... Fale conosco!"]})]}),Object(r.jsxs)("div",{className:"card-footer",children:[!a&&Object(r.jsx)(r.Fragment,{children:2!==t.status?Object(r.jsx)("a",{className:"btn-resolver-pedido ".concat(t.status?"disabled":""),href:t.status?"#":i,target:t.status?"":"_blank",children:t.status?"Pedido realizado!":Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(v.a,{})," Fale conosco!!"]})}):Object(r.jsxs)("center",{children:[Object(r.jsx)("br",{}),"Tem certeza que digitou o n\xfamero certo??"]})}),Object(r.jsxs)("div",{className:"btn-resolver-pedido",onClick:function(){return x(!f)},children:[Object(r.jsx)(m.d,{})," Contato"]}),a&&!t.status&&Object(r.jsxs)("div",{className:"btn-resolver-pedido",onClick:function(){return g.apply(this,arguments)},children:[Object(r.jsx)(m.a,{}),"Confirmar realiza\xe7\xe3o"]}),a&&!!t.status&&t.status>0&&Object(r.jsx)("button",{className:"btn-resolver-pedido disabled",onClick:function(){return N.apply(this,arguments)},children:"Pedido j\xe1 realizado"})]})]})};var N=function(){var e=Object(c.useState)([]),t=Object(p.a)(e,2),a=t[0],n=t[1],o=Object(c.useState)(""),s=Object(p.a)(o,2),i=s[0],d=s[1],u=Object(c.useState)([]),b=Object(p.a)(u,2),O=b[0],m=b[1],f=Object(x.a)(["pedidos",i],(function(){return C.apply(this,arguments)})),v=f.isLoading,N=f.isFetching,S=f.error;function C(){return(C=Object(j.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i?{pedidoId:i}:{},e.next=3,h.get("/pedido",{params:t});case 3:a=e.sent,n(a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){var e=localStorage.getItem("pedidos"),t=e?JSON.parse(e):[];m(t)}),[]),Object(r.jsxs)("div",{className:"hover flex-start",children:[Object(r.jsxs)("div",{className:"title",children:[Object(r.jsx)("h3",{children:"Realize um sonho!"}),Object(r.jsxs)("p",{children:["Dividimos o mesmo objetivo! Um sorriso \xe9 um passo a mais por um mundo melhor!",Object(r.jsx)("br",{}),"Vem comigo, vou te mostrar algum sonho que voc\xea pode realizar!"]}),O.length>0&&Object(r.jsxs)("div",{className:"pedidos-feitos",children:["N\xfameros dos seus pedidos:",O.map((function(e,t){return O.length-1===t?e:"".concat(e,", ")}))]}),Object(r.jsx)("input",{placeholder:"Busque o seu pedido pelo n\xfamero!",className:"form-control",onChange:function(e){return d(e.target.value)},value:i})]}),(v||N)&&Object(r.jsx)("h2",{children:"Carregando pedidos..."}),S&&Object(r.jsx)("h2",{children:"Erro ao carregar pedidos..."}),a.length?a.map((function(e){return Object(r.jsx)(g,{pedido:e},e.id)})):Object(r.jsx)(g,{pedido:{status:2,pedido:"Nenhum pedido encontrado"}})]})};var S=function(){var e=Object(c.useState)([]),t=Object(p.a)(e,2),a=t[0],n=t[1],o=Object(c.useState)(""),s=Object(p.a)(o,2),i=s[0],d=s[1],u=Object(c.useState)(null),b=Object(p.a)(u,2),f=b[0],v=b[1],N=Object(x.a)(["pedidos",i],(function(){return q.apply(this,arguments)})),S=N.isLoading,C=N.isFetching,z=N.error,w=N.refetch;function y(){return(y=Object(j.a)(l.a.mark((function e(){var t,a,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.a.loading("Fazendo login"),a=t.hide,e.next=3,h.post("/auth",{password:E});case 3:if(r=e.sent,a(),c=r.data.login){e.next=8;break}return e.abrupt("return",O.a.error("Senha incorreta..."));case 8:O.a.success("Login realizado com sucesso"),v(c),localStorage.setItem("auth",c),h.defaults.headers.Authorization=c;case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){var e=localStorage.getItem("auth");if(!e)return!1;v(e),h.defaults.headers.Authorization=e}),[]);var k=Object(c.useState)(""),I=Object(p.a)(k,2),E=I[0],F=I[1];if(!f)return Object(r.jsxs)("div",{className:"hover",children:[Object(r.jsx)("input",{type:"password",placeholder:"Senha de acesso",id:"login-input",onChange:function(e){return F(e.target.value)},value:E}),Object(r.jsxs)("div",{id:"login-btn",onClick:function(){return y.apply(this,arguments)},children:[Object(r.jsx)(m.c,{})," Login"]})]});function q(){return(q=Object(j.a)(l.a.mark((function e(){var t,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i?{pedidoId:i}:{},console.log(t),e.next=4,h.get("/pedido",{params:t});case 4:a=e.sent,r=a.data,n(r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.jsxs)("div",{className:"hover flex-start",children:[Object(r.jsxs)("div",{className:"title",children:[Object(r.jsx)("h3",{children:"Confirma\xe7\xe3o de pedidos"}),Object(r.jsx)("p",{children:"Somente confirme o pedido se ele foi realizado!"}),Object(r.jsx)("input",{placeholder:"N\xfamero do pedido realizado...",className:"form-control",onChange:function(e){return d(e.target.value)},value:i})]}),(S||C)&&Object(r.jsx)("h2",{children:"Carregando pedidos..."}),z&&Object(r.jsx)("h2",{children:"Erro ao carregar pedidos..."}),a.length?a.map((function(e){return Object(r.jsx)(g,{pedido:e,confirmar:!0,afterChange:w},e.id)})):Object(r.jsx)(g,{pedido:{status:2,pedido:"Nenhum pedido encontrado"}})]})};a(60),a(66);var C=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(i.a,{children:Object(r.jsxs)(d.c,{children:[Object(r.jsx)(d.a,{exact:!0,path:"/",component:f}),Object(r.jsx)(d.a,{exact:!0,path:"/realizeUmSonho",component:N}),Object(r.jsx)(d.a,{exact:!0,path:"/confirmar",component:S})]})})})};s.a.render(Object(r.jsx)(n.a.StrictMode,{children:Object(r.jsx)(C,{})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.7bbbd0d9.chunk.js.map